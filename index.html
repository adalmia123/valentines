<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Be My Valentine?</title>
    <link href="https://fonts.googleapis.com/css2?family=Indie+Flower&family=Poppins:wght@400;600&display=swap" rel="stylesheet">
    <style>
        :root {
            /* Color Palette */
            --bg-pink: #fff0f3;     /* Very pale background pink */
            --env-base: #ff8fa3;    /* Main envelope color */
            --env-shadow: #e07a8c;  /* Darker pink for depth */
            --letter-paper: #fffbfb;/* Off-white/very pale pink paper */
            --text-color: #c92a42;  /* Deep red/pink text */
        }

        body {
            background-color: var(--bg-pink);
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            font-family: 'Poppins', sans-serif;
            overflow: hidden;
            transition: background-color 1s ease;
        }

        /* ==================== PHASE 1: THE ENVELOPE ==================== */
        
        .envelope-area {
            position: relative;
            cursor: pointer;
        }

        /* The container that holds everything */
        .envelope-wrapper {
            position: relative;
            width: 300px;
            height: 200px;
            background-color: var(--env-base);
            box-shadow: 0 10px 20px rgba(0,0,0,0.15);
        }

        /* The static bottom flaps */
        .flap-left {
            position: absolute;
            top: 0; left: 0;
            width: 0; height: 0;
            border-top: 100px solid transparent;
            border-bottom: 100px solid transparent;
            border-left: 150px solid var(--env-shadow);
            z-index: 3;
        }
        .flap-right {
            position: absolute;
            top: 0; right: 0;
            width: 0; height: 0;
            border-top: 100px solid transparent;
            border-bottom: 100px solid transparent;
            border-right: 150px solid var(--env-shadow);
            z-index: 3;
        }
        .flap-bottom {
            position: absolute;
            bottom: 0; left: 0;
            width: 0; height: 0;
            border-left: 150px solid transparent;
            border-right: 150px solid transparent;
            border-bottom: 100px solid var(--env-base);
            z-index: 3;
        }

        /* The moving top flap */
        .flap-top {
            position: absolute;
            top: 0; left: 0;
            width: 0; height: 0;
            border-left: 150px solid transparent;
            border-right: 150px solid transparent;
            border-top: 110px solid var(--env-shadow);
            transform-origin: top;
            transition: transform 0.6s ease-in-out 0.2s; /* Delay slightly for letter */
            z-index: 5;
        }

        /* The Letter Itself */
        .letter-container {
            position: absolute;
            top: 5px;
            left: 10px;
            width: 280px;
            /* Intially stuffed inside */
            height: 190px; 
            background-color: var(--letter-paper);
            z-index: 2; /* Start behind flaps */
            transition: all 0.8s ease-in-out;
            
            /* Paper styling */
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            border: 1px solid #f0dce0;
            padding: 20px;
            box-sizing: border-box;
            text-align: center;
            display: flex;
            flex-direction: column;
            justify-content: center;
            overflow: hidden; /* Hide floating hearts initially */
        }

        .letter-content h2 {
            color: var(--text-color);
            font-family: 'Indie Flower', cursive;
            font-size: 1.8rem;
            margin-bottom: 25px;
        }

        /* === Opening Animation States === */
        .open .flap-top {
            transform: rotateX(180deg);
            z-index: 1; /* Move behind everything once open */
        }

        .open .letter-container {
            /* Slide up and out */
            transform: translateY(-150px); 
            height: 250px; /* Expand slightly */
            z-index: 6; /* Move to very front */
            overflow: visible; /* Let hearts float out */
        }

        /* Tiny Floating Hearts from Letter */
        .mini-heart {
            position: absolute;
            color: var(--text-color);
            font-size: 14px;
            opacity: 0;
            bottom: 10px;
        }
        .open .mini-heart.h1 { left: 20%; animation: floatUp 1.5s ease-out forwards 0.5s; }
        .open .mini-heart.h2 { left: 50%; animation: floatUp 1.8s ease-out forwards 0.7s; }
        .open .mini-heart.h3 { left: 80%; animation: floatUp 1.2s ease-out forwards 0.6s; }

        @keyframes floatUp {
            0% { transform: translateY(0) scale(0.5); opacity: 0; }
            50% { opacity: 1; }
            100% { transform: translateY(-100px) scale(1.2); opacity: 0;}
        }

        /* === Buttons === */
        .btn-group {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 20px;
        }
        button {
            padding: 10px 25px;
            font-family: 'Poppins', sans-serif;
            font-size: 16px;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        #yesBtn { background-color: #ff4d6d; color: white; }
        #noBtn { background-color: #e9ecef; color: #333; position: relative; }
        #yesBtn:hover { transform: scale(1.05); background-color: #d62828;}

        /* ==================== PHASE 2: CELEBRATION ==================== */
        #celebration {
            display: none; /* Hidden initially */
            text-align: center;
            width: 100%;
            min-height: 100vh;
            padding: 40px 20px;
            box-sizing: border-box;
            /* Allow scrolling */
            overflow-y: auto; 
            position: relative;
        }

        /* Flower Images */
        .bouquet-container {
            display: flex;
            justify-content: center;
            gap: -20px;
            margin-bottom: 30px;
        }
        .bouquet-img {
            width: 150px;
            height: auto;
            filter: drop-shadow(0 5px 10px rgba(0,0,0,0.2));
            animation: popIn 0.8s cubic-bezier(0.25, 0.46, 0.45, 0.94) both;
        }
        .b2 { animation-delay: 0.2s; transform: rotate(10deg); margin-left: -30px;}
        .b3 { animation-delay: 0.4s; transform: rotate(-10deg); margin-left: -30px;}
        @keyframes popIn {
            from { transform: scale(0) translateY(50px); opacity: 0; }
            to { opacity: 1; }
        }

        #celebration h1 {
            color: var(--text-color);
            font-family: 'Indie Flower', cursive;
            font-size: 3rem;
            margin-bottom: 40px;
        }

        /* Note Cards Container */
        #reasons-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 20px;
            max-width: 1000px;
            margin: 0 auto 50px auto; /* Margin bottom for scrolling space */
        }

        /* Individual Note Card Style */
        .note-card {
            background-color: white;
            width: 200px;
            padding: 20px;
            box-shadow: 2px 4px 12px rgba(0,0,0,0.08);
            font-family: 'Indie Flower', cursive;
            font-size: 1.2rem;
            color: #555;
            transform: rotate(var(--rotation));
            transition: transform 0.3s;
            /* Paper texture affect */
            background-image: linear-gradient(to bottom, #fffcfc 0%, #f8f8f8 100%);
            border: 1px solid #eee;
        }
        .note-card:hover {
            transform: scale(1.1) rotate(0deg) !important;
            z-index: 10;
            box-shadow: 5px 10px 20px rgba(0,0,0,0.15);
        }

        /* Falling Hearts Background */
        .falling-heart {
            position: fixed;
            top: -10vh;
            color: #ff4d6d;
            font-size: 20px;
            animation: fall linear forwards;
            z-index: 0; /* Behind content */
            opacity: 0.6;
        }
        @keyframes fall {
            to { transform: translateY(110vh) rotate(360deg); }
        }

    </style>
</head>
<body>

    <div class="envelope-area" id="envelope-area">
        <div class="envelope-wrapper" onclick="openEnvelope()">
            <div class="flap-top"></div>
            <div class="flap-right"></div>
            <div class="flap-left"></div>
            <div class="flap-bottom"></div>

            <div class="letter-container">
                <div class="mini-heart h1">‚ù§</div>
                <div class="mini-heart h2">‚ù§</div>
                <div class="mini-heart h3">‚ù§</div>

                <div class="letter-content">
                    <h2>Will you be my Valentine?</h2>
                    <div class="btn-group">
                        <button id="yesBtn" onclick="handleYesClick(event)">Yes, definitely!</button>
                        <button id="noBtn" onmouseover="moveNoButton(event)">No way</button>
                    </div>
                </div>
            </div>
        </div>
    </div>


    <div id="celebration">
        <h1>Yay! I knew you'd say Yes! ‚ù§Ô∏è</h1>
        
        <div class="bouquet-container">
            <img src="https://cdn-icons-png.flaticon.com/512/1808/1808826.png" class="bouquet-img b1" alt="flower">
            <img src="https://cdn-icons-png.flaticon.com/512/3460/3460592.png" class="bouquet-img b2" alt="flower">
            <img src="https://cdn-icons-png.flaticon.com/512/1808/1808845.png" class="bouquet-img b3" alt="flower">
        </div>

        <h2 style="color: var(--text-color); font-family: 'Indie Flower';">Here are 100 reasons why I love you:</h2>
        
        <div id="reasons-container"></div>
    </div>


    <script>
        let isOpen = false;
        const envelopeArea = document.getElementById('envelope-area');

        // 1. Handle Opening the Envelope
        function openEnvelope() {
            if (!isOpen) {
                // Add class to trigger CSS animations (flap opens, letter slides up)
                envelopeArea.classList.add('open');
                isOpen = true;
            }
        }

        // 2. The Runaway "No" Button logic
        function moveNoButton(event) {
            // Stop the event from bubbling up to the envelope click handler
            if(event) event.stopPropagation();

            const noBtn = document.getElementById('noBtn');
            const yesBtn = document.getElementById('yesBtn');
            
            // Calculate available space
            const maxWidth = window.innerWidth - noBtn.offsetWidth - 50; // 50px buffer
            const maxHeight = window.innerHeight - noBtn.offsetHeight - 50;
            
            // Generate random positions
            const newX = Math.max(20, Math.random() * maxWidth);
            const newY = Math.max(20, Math.random() * maxHeight);
            
            noBtn.style.position = 'fixed'; // Use fixed to escape the letter container
            noBtn.style.left = newX + 'px';
            noBtn.style.top = newY + 'px';
            noBtn.style.zIndex = '100'; // Ensure it's on top

            // Make "Yes" button grow bigger
            let currentFontSize = parseFloat(window.getComputedStyle(yesBtn).fontSize);
            let currentPadding = parseFloat(window.getComputedStyle(yesBtn).paddingInline);
            yesBtn.style.fontSize = `${currentFontSize + 2}px`;
            yesBtn.style.padding = `15px ${currentPadding + 5}px`;
        }

        // 3. Handle "Yes" Click - Transition to Phase 2
        function handleYesClick(event) {
            event.stopPropagation();
            
            // Fade out envelope, Fade in celebration
            envelopeArea.style.opacity = '0';
            envelopeArea.style.transition = 'opacity 0.8s ease';
            
            setTimeout(() => {
                envelopeArea.style.display = 'none';
                const celebration = document.getElementById('celebration');
                celebration.style.display = 'block';
                // Need a slight delay for display:block to register before opacity fade-in works
                setTimeout(() => celebration.style.opacity = 1, 50);
                
                document.body.style.overflow = 'auto'; // Enable scrolling back on body
                document.body.style.backgroundColor = '#fff5f7'; // Slightly lighter background for part 2

                startFallingHearts();
                generateReasonsCards();
            }, 800);
        }


        // 4. Generate the 100 Note Cards
        // EDIT THIS LIST WITH YOUR REAL REASONS!
        const myReasons = [
            "The way you crinkle your nose when you laugh",
            "How kind you are to strangers",
            "Your amazing sense of style",
            "The coffee you make me in the mornings",
            "How hard you work for your dreams",
            "Your hugs feel like home",
            "You always know when I need cheering up",
            "Your adventurous spirit",
            "I love cooking with you",
            "How safe I feel with you",
            // ... fill this in ...
        ];

        // Filler function to ensure we have 100 for the demo
        while (myReasons.length < 100) {
            myReasons.push(`Reason #${myReasons.length + 1}: I just love everything about you!`);
        }

        function generateReasonsCards() {
            const container = document.getElementById('reasons-container');
            
            myReasons.forEach((reason, index) => {
                const card = document.createElement('div');
                card.classList.add('note-card');
                card.innerText = reason;
                
                // Add a random slight rotation for a "scattered notes" look
                // Random between -5deg and 5deg
                const randomRotation = Math.random() * 10 - 5; 
                card.style.setProperty('--rotation', `${randomRotation}deg`);
                
                // Stagger fade-in animation
                card.style.opacity = '0';
                card.style.animation = `fadeInUp 0.5s ease forwards ${index * 0.05}s`;
                
                container.appendChild(card);
            });
        }

        // CSS for the JS-injected card animation
        const style = document.createElement('style');
        style.innerHTML = `
            @keyframes fadeInUp {
                from { opacity: 0; transform: translateY(20px) rotate(var(--rotation)); }
                to { opacity: 1; transform: translateY(0) rotate(var(--rotation)); }
            }
        `;
        document.head.appendChild(style);


        // 5. Falling Hearts Background Animation
        function startFallingHearts() {
            setInterval(() => {
                const heart = document.createElement('div');
                heart.classList.add('falling-heart');
                heart.innerHTML = ['‚ù§Ô∏è', 'üíñ', 'üíù', 'üíï'][Math.floor(Math.random() * 4)];
                heart.style.left = Math.random() * 100 + 'vw';
                heart.style.fontSize = (Math.random() * 20 + 15) + 'px';
                const duration = Math.random() * 3 + 4; // between 4 and 7 seconds
                heart.style.animationDuration = duration + 's';
                document.body.appendChild(heart);
                
                setTimeout(() => heart.remove(), duration * 1000);
            }, 400); // Create a new heart every 400ms
        }

    </script>
</body>
</html>
