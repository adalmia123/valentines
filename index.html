<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Be My Valentine?</title>
    <link href="https://fonts.googleapis.com/css2?family=Indie+Flower&family=Poppins:wght@400;600&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-pink: #ffe6ea;
            --env-base: #ff5c8a;    /* Darker pink for envelope body */
            --env-flap: #ff7aa2;    /* Lighter pink for flaps */
            --env-inside: #e0457b;  /* Darker shade for inside depth */
            --letter-paper: #fff;
            --text-color: #c92a42;
        }

        body {
            background-color: var(--bg-pink);
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            font-family: 'Poppins', sans-serif;
            overflow: hidden;
        }

        /* --- Envelope Container --- */
        .envelope-wrapper {
            position: relative;
            width: 320px;
            height: 220px;
            cursor: pointer;
            transition: transform 0.3s;
        }

        /* Hover effect before opening */
        .envelope-wrapper:hover {
            transform: scale(1.02);
        }

        /* The Envelope Body */
        .envelope {
            position: relative;
            width: 100%;
            height: 100%;
            background-color: var(--env-inside); /* Dark inside color */
            box-shadow: 0 10px 25px rgba(0,0,0,0.2);
            border-radius: 0 0 10px 10px;
        }

        /* Flaps (Triangles) */
        .flap {
            position: absolute;
            width: 0;
            height: 0;
            z-index: 3;
        }

        /* Side Flaps */
        .flap.left {
            top: 0; left: 0;
            border-top: 110px solid transparent;
            border-bottom: 110px solid transparent;
            border-left: 160px solid var(--env-flap); /* Lighter */
        }

        .flap.right {
            top: 0; right: 0;
            border-top: 110px solid transparent;
            border-bottom: 110px solid transparent;
            border-right: 160px solid var(--env-flap); /* Lighter */
        }

        /* Bottom Flap */
        .flap.bottom {
            bottom: 0; left: 0;
            border-left: 160px solid transparent;
            border-right: 160px solid transparent;
            border-bottom: 115px solid var(--env-base); /* Slightly darker base */
            border-radius: 0 0 10px 10px;
        }

        /* Top Flap (The Moving Part) */
        .flap.top {
            top: 0; left: 0;
            border-left: 160px solid transparent;
            border-right: 160px solid transparent;
            border-top: 120px solid var(--env-flap);
            transform-origin: top;
            transition: transform 0.6s ease-in-out, z-index 0.6s;
            z-index: 4;
            /* Added border to stop blending */
            filter: drop-shadow(0 2px 3px rgba(0,0,0,0.1)); 
        }

        /* --- The Letter --- */
        .letter {
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 90%;
            height: 90%;
            background: var(--letter-paper);
            border-radius: 5px;
            z-index: 2; /* Inside envelope initially */
            transition: all 1s ease-in-out;
            padding: 20px;
            box-sizing: border-box;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
        }

        .letter h2 {
            font-family: 'Indie Flower', cursive;
            color: var(--text-color);
            margin-bottom: 10px;
            font-size: 1.5rem;
        }

        .letter p {
            font-size: 0.9rem;
            color: #666;
            margin-bottom: 20px;
        }

        /* --- Animation States --- */
        
        /* 1. Flap Opens */
        .open .flap.top {
            transform: rotateX(180deg);
            z-index: 1; /* Goes behind letter */
        }

        /* 2. Letter Exits and Expands */
        .open .letter {
            bottom: 100px; /* Moves up */
            transform: translateX(-50%) scale(1.3); /* Grows larger */
            height: 350px; /* Expands height */
            width: 320px;
            z-index: 10; /* Comes to very front */
            box-shadow: 0 15px 30px rgba(0,0,0,0.3);
        }

        /* --- Buttons --- */
        .btn-group {
            margin-top: 20px;
            display: flex;
            gap: 15px;
            position: relative;
            width: 100%;
            justify-content: center;
        }

        button {
            padding: 12px 30px;
            font-size: 1rem;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            font-family: 'Poppins', sans-serif;
            transition: all 0.3s;
        }

        #yesBtn {
            background-color: #ff4d6d;
            color: white;
            box-shadow: 0 4px 10px rgba(255, 77, 109, 0.4);
        }

        #noBtn {
            background-color: #f1f1f1;
            color: #333;
            /* Important for movement */
            position: absolute; 
            left: 55%; /* Start next to Yes */
        }

        /* --- Balloon Hearts --- */
        .balloon-heart {
            position: absolute;
            bottom: 50%;
            left: 50%;
            font-size: 24px;
            color: #ff4d6d;
            opacity: 0;
            z-index: 1; /* Behind letter, in front of envelope */
            pointer-events: none;
        }

        @keyframes floatUpBalloon {
            0% { transform: translate(-50%, 0) scale(0.5); opacity: 0; }
            20% { opacity: 1; }
            100% { transform: translate(-50%, -400px) scale(1.2); opacity: 0; }
        }

        /* --- Phase 2: Celebration --- */
        #celebration {
            display: none;
            width: 100%;
            padding: 50px 20px;
            text-align: center;
        }

        .flower-grid {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin: 30px 0;
        }
        
        .flower-img {
            width: 120px;
            animation: grow 1s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards;
        }
        
        .note-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 20px;
            max-width: 1000px;
            margin: 0 auto;
        }

        .note {
            background: white;
            padding: 20px;
            font-family: 'Indie Flower', cursive;
            box-shadow: 2px 4px 10px rgba(0,0,0,0.1);
            transform: rotate(-2deg);
            transition: transform 0.3s;
            background: linear-gradient(#fff, #fdfbfb);
        }
        
        .note:hover { transform: rotate(0) scale(1.05); z-index: 5; }
        .note:nth-child(even) { transform: rotate(2deg); }

        @keyframes grow { from{transform:scale(0);} to{transform:scale(1);} }

    </style>
</head>
<body>

    <div class="envelope-wrapper" id="envelopeWrapper" onclick="openEnvelope()">
        <div class="envelope">
            <div class="flap left"></div>
            <div class="flap right"></div>
            <div class="flap bottom"></div>
            <div class="flap top"></div>
            
            <div class="letter">
                <h2>My Dearest,</h2>
                <p>I have a very important question to ask you...</p>
                <p><strong>Will you be my Valentine?</strong></p>
                
                <div class="btn-group">
                    <button id="yesBtn" onclick="acceptLove(event)">Yes</button>
                    <button id="noBtn" onmouseover="dodgeNo(event)">No</button>
                </div>
            </div>
        </div>
    </div>

    <div id="celebration">
        <h1 style="font-family: 'Indie Flower'; color: #c92a42; font-size: 3rem;">YAY! I Love You! ‚ù§Ô∏è</h1>
        
        <div class="flower-grid">
            <img src="https://cdn-icons-png.flaticon.com/512/3028/3028628.png" class="flower-img" style="animation-delay: 0s">
            <img src="https://cdn-icons-png.flaticon.com/512/3028/3028634.png" class="flower-img" style="animation-delay: 0.2s">
            <img src="https://cdn-icons-png.flaticon.com/512/3028/3028639.png" class="flower-img" style="animation-delay: 0.4s">
        </div>

        <h2 style="font-family: 'Poppins'; color: #555;">100 Reasons Why:</h2>
        <div class="note-grid" id="notes"></div>
    </div>

    <script>
        let isOpen = false;
        const envelope = document.getElementById('envelopeWrapper');
        const noBtn = document.getElementById('noBtn');

        // 1. Open Envelope & Balloon Hearts
        function openEnvelope() {
            if (!isOpen) {
                envelope.classList.add('open');
                isOpen = true;
                
                // Spawn Balloon Hearts
                for(let i=0; i<15; i++) {
                    setTimeout(createBalloonHeart, i * 100);
                }
            }
        }

        function createBalloonHeart() {
            const heart = document.createElement('div');
            heart.classList.add('balloon-heart');
            heart.innerHTML = '‚ù§Ô∏è';
            heart.style.left = (50 + (Math.random() * 40 - 20)) + '%'; // Randomize X near center
            heart.style.animation = `floatUpBalloon ${2 + Math.random()}s ease-in forwards`;
            envelope.appendChild(heart);
        }

        // 2. The Smart Runaway Button
        function dodgeNo(e) {
            e.stopPropagation(); // Don't trigger envelope click

            // Screen boundaries
            const padding = 50;
            const maxX = window.innerWidth - padding;
            const maxY = window.innerHeight - padding;
            
            // Random position
            let newX = Math.random() * (maxX - padding) + padding;
            let newY = Math.random() * (maxY - padding) + padding;

            noBtn.style.position = 'fixed'; // Break out of the container flow
            noBtn.style.left = newX + 'px';
            noBtn.style.top = newY + 'px';
            noBtn.style.zIndex = '1000'; // Always on top

            // Grow the Yes button
            const yesBtn = document.getElementById('yesBtn');
            let currentSize = parseFloat(window.getComputedStyle(yesBtn).fontSize);
            if (currentSize < 100) { // Cap max size
                yesBtn.style.fontSize = (currentSize + 5) + 'px';
                yesBtn.style.padding = (parseFloat(window.getComputedStyle(yesBtn).paddingTop) + 2) + 'px ' + (parseFloat(window.getComputedStyle(yesBtn).paddingRight) + 5) + 'px';
            }
        }

        // 3. Accept Logic
        function acceptLove(e) {
            e.stopPropagation();
            
            // Hide envelope phase
            envelope.style.display = 'none';
            noBtn.style.display = 'none'; // Hide the rogue button
            
            // Show celebration
            document.getElementById('celebration').style.display = 'block';
            document.body.style.overflow = 'auto'; // Enable scroll
            
            generateNotes();
            startRain();
        }

        // 4. Generate Notes
        const reasons = [
            "Your smile is my favorite thing",
            "You make bad days better",
            "Your laugh is contagious",
            "You are so supportive",
            "You give the best hugs",
            // Add your 100 reasons here!
        ];
        
        // Filler
        while(reasons.length < 100) reasons.push("I love you more than words can say!");

        function generateNotes() {
            const grid = document.getElementById('notes');
            reasons.forEach((text, i) => {
                const note = document.createElement('div');
                note.className = 'note';
                note.innerText = text;
                note.style.animation = `grow 0.5s ease forwards ${i * 0.05}s`;
                grid.appendChild(note);
            });
        }

        // 5. Rain Hearts (Background)
        function startRain() {
            setInterval(() => {
                const drop = document.createElement('div');
                drop.innerHTML = 'üíñ';
                drop.style.position = 'fixed';
                drop.style.left = Math.random() * 100 + 'vw';
                drop.style.top = '-50px';
                drop.style.fontSize = '20px';
                drop.style.animation = `fall ${Math.random() * 2 + 3}s linear`;
                document.body.appendChild(drop);
                
                setTimeout(() => drop.remove(), 5000);
            }, 200);
        }

        // Add Fall Animation dynamically
        const style = document.createElement('style');
        style.innerHTML = `@keyframes fall { to { transform: translateY(110vh) rotate(360deg); } }`;
        document.head.appendChild(style);

    </script>
</body>
</html>
