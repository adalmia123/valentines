<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>For My Valentine</title>
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@600&family=Caveat:wght@400;700&family=Indie+Flower&family=Poppins:wght@400;600&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-color: #fce4ec;
            --env-color: #ff5c8a;
            --env-dark: #d6336c;
            --paper-color: #fffbf0; /* Creamy White */
            --paper-border: #e6d2b5;
        }

        body {
            background-color: var(--bg-color);
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            font-family: 'Poppins', sans-serif;
            overflow: hidden; 
        }

        /* --- ENVELOPE STYLES --- */
        .envelope-wrapper {
            position: relative;
            cursor: pointer;
            width: 400px; 
            height: 280px; 
            transition: transform 0.3s ease;
        }

        .envelope-wrapper:hover {
            transform: scale(1.02);
        }

        .envelope {
            position: relative;
            width: 100%;
            height: 100%;
            background-color: var(--env-dark);
            box-shadow: 0 15px 30px rgba(0,0,0,0.2);
            z-index: 1;
        }

        /* FLAPS */
        .flap {
            position: absolute;
            z-index: 5;
        }

        .flap.left {
            top: 0; left: 0;
            width: 0; height: 0;
            border-top: 140px solid transparent;
            border-bottom: 140px solid transparent;
            border-left: 200px solid var(--env-color);
        }
        
        .flap.right {
            top: 0; right: 0;
            width: 0; height: 0;
            border-top: 140px solid transparent;
            border-bottom: 140px solid transparent;
            border-right: 200px solid var(--env-color);
        }

        .flap.bottom {
            bottom: 0; left: 0;
            width: 0; height: 0;
            border-left: 200px solid transparent;
            border-right: 200px solid transparent;
            border-bottom: 160px solid var(--env-dark); 
        }

        .flap.top {
            top: 0; left: 0;
            width: 0; height: 0;
            border-left: 200px solid transparent;
            border-right: 200px solid transparent;
            border-top: 160px solid var(--env-color);
            transform-origin: top;
            transition: transform 0.6s ease-in-out, z-index 0.6s;
            z-index: 6; 
        }

        /* --- THE LETTER --- */
        .letter {
            position: absolute;
            bottom: 0;
            left: 5%;
            width: 90%;
            height: 90%;
            background-color: var(--paper-color);
            border: 4px double var(--paper-border); /* Elegant border */
            
            z-index: 2; 
            transition: bottom 0.8s ease-in-out, height 0.8s, transform 0.8s, z-index 0.1s;
            box-shadow: 0 5px 15px rgba(0,0,0,0.15);
            padding: 30px; 
            box-sizing: border-box;
            
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        .letter-content {
            opacity: 0; 
            transition: opacity 0.5s ease 0.8s;
            width: 100%;
            text-align: center;
        }

        .letter h2 {
            font-family: 'Dancing Script', cursive;
            color: #d32f2f;
            font-size: 3rem;
            margin: 0 0 20px 0;
            line-height: 1.2;
        }
        
        .letter p {
            font-family: 'Dancing Script', cursive;
            font-size: 1.8rem;
            color: #444;
            margin: 10px 0;
        }
        
        .small-text {
             font-family: 'Poppins', sans-serif;
             font-size: 1rem;
             color: #888;
             margin-top: 20px;
        }

        /* --- OPEN ANIMATION --- */
        .open .flap.top {
            transform: rotateX(180deg);
            z-index: 1; 
        }

        .open .letter {
            bottom: 50px;
            height: 520px; 
            width: 450px;
            left: -25px; 
            z-index: 10; 
            transform: scale(1);
        }

        .open .letter-content {
            opacity: 1;
        }

        /* --- BUTTONS --- */
        .btn-group {
            margin-top: 40px;
            display: flex;
            gap: 30px;
            justify-content: center;
            position: relative; 
        }

        button {
            padding: 12px 35px;
            font-family: 'Poppins', sans-serif;
            font-weight: bold;
            font-size: 16px;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            transition: transform 0.2s;
        }

        #yesBtn {
            background-color: #ff4d6d;
            color: white;
        }

        #noBtn {
            background-color: #e0e0e0;
            color: #333;
            position: relative; 
        }

        /* --- CELEBRATION PAGE --- */
        #celebration {
            display: none;
            width: 100%;
            min-height: 100vh;
            padding: 40px;
            text-align: center;
            box-sizing: border-box;
            background: linear-gradient(180deg, #fff0f3 0%, #ffe6ea 100%);
        }

        .flower-container {
            display: flex;
            justify-content: center;
            flex-wrap: wrap; /* Allows 6 flowers to sit nicely */
            gap: 20px;
            max-width: 800px;
            margin: 30px auto;
        }
        
        .flower-container img {
            width: 120px;
            height: auto;
            filter: drop-shadow(0 10px 10px rgba(0,0,0,0.2));
            animation: bloom 1s ease-out backwards;
            transition: transform 0.3s;
        }
        
        .flower-container img:hover {
            transform: scale(1.1);
        }

        /* NOTE GRID */
        .reasons-grid {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 30px;
            max-width: 1200px;
            margin: 50px auto;
        }

        .sticky-note {
            width: 200px;
            height: 200px;
            padding: 20px;
            box-sizing: border-box;
            font-family: 'Indie Flower', cursive;
            font-size: 1.4rem;
            color: #444;
            box-shadow: 5px 5px 15px rgba(0,0,0,0.15);
            display: flex;
            align-items: center;
            justify-content: center;
            transform: rotate(var(--rot));
            transition: transform 0.3s;
        }
        
        .sticky-note:hover {
            transform: scale(1.1) rotate(0deg) !important;
            z-index: 100;
            box-shadow: 10px 10px 25px rgba(0,0,0,0.2);
        }

        @keyframes bloom { from{transform: scale(0);} to{transform: scale(1);} }

        /* Floating Hearts */
        .floating-heart {
            position: absolute;
            opacity: 0;
            animation: floatUp ease-in forwards;
            z-index: 5; 
            pointer-events: none;
        }

        @keyframes floatUp { 
            0% { transform: translateY(0) scale(0.5); opacity: 0; }
            10% { opacity: 1; }
            100% { transform: translateY(-400px) scale(1.5); opacity: 0; }
        }

        @keyframes rainUp { 
            to { transform: translateY(-110vh) rotate(360deg); }
        }

    </style>
</head>
<body>

    <div class="envelope-wrapper" id="envelopeWrapper" onclick="openEnvelope()">
        <div class="envelope">
            <div class="flap left"></div>
            <div class="flap right"></div>
            <div class="flap bottom"></div>
            <div class="flap top"></div>
            
            <div class="letter">
                <div class="letter-content">
                    <h2>My Dearest,</h2>
                    <p>I have a very important question...</p>
                    <p><strong>Will you be my Valentine?</strong></p>
                    <p class="small-text">(Please say yes!)</p>
                    
                    <div class="btn-group">
                        <button id="yesBtn" onclick="celebrate(event)">YES!</button>
                        <button id="noBtn" onmouseover="runAway(event)">No</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="celebration">
        <h1 style="font-family: 'Dancing Script'; font-size: 5rem; color: #c92a42;">YAY! I Love You! ‚ù§Ô∏è</h1>
        
        <div class="flower-container">
            <img src="https://cdn-icons-png.flaticon.com/512/1808/1808845.png" style="animation-delay: 0.1s">
            <img src="https://cdn-icons-png.flaticon.com/512/1808/1808826.png" style="animation-delay: 0.2s">
            <img src="https://cdn-icons-png.flaticon.com/512/3460/3460592.png" style="animation-delay: 0.3s">
            <img src="https://cdn-icons-png.flaticon.com/512/3028/3028639.png" style="animation-delay: 0.4s">
            <img src="https://cdn-icons-png.flaticon.com/512/3028/3028634.png" style="animation-delay: 0.5s">
            <img src="https://cdn-icons-png.flaticon.com/512/3028/3028628.png" style="animation-delay: 0.6s">
        </div>

        <h2 style="font-family: 'Poppins'; color: #555;">100 Reasons Why:</h2>
        <div class="reasons-grid" id="reasonsGrid"></div>
    </div>

    <script>
        let isOpen = false;
        let canRunaway = false; 
        const envelope = document.getElementById('envelopeWrapper');
        const noBtn = document.getElementById('noBtn');

        // 1. OPEN ENVELOPE
        function openEnvelope() {
            if (!isOpen) {
                envelope.classList.add('open');
                isOpen = true;
                
                // Spawn Larger Balloon Hearts (15 of them)
                for(let i=0; i<15; i++){
                    setTimeout(() => spawnHeart(true), i * 150);
                }

                setTimeout(() => {
                    canRunaway = true;
                }, 1000);
            }
        }

        // 2. RUNAWAY NO BUTTON
        function runAway(e) {
            e.stopPropagation();
            if (!canRunaway) return;

            const windowWidth = window.innerWidth;
            const windowHeight = window.innerHeight;
            const btnWidth = noBtn.offsetWidth;
            const btnHeight = noBtn.offsetHeight;

            const maxX = windowWidth - btnWidth - 50;
            const maxY = windowHeight - btnHeight - 50;

            const newX = Math.random() * maxX;
            const newY = Math.random() * maxY;

            noBtn.style.position = 'fixed';
            noBtn.style.left = Math.max(20, newX) + 'px';
            noBtn.style.top = Math.max(20, newY) + 'px';
            noBtn.style.zIndex = '1000';

            const yesBtn = document.getElementById('yesBtn');
            const currentSize = parseFloat(window.getComputedStyle(yesBtn).fontSize);
            yesBtn.style.fontSize = (currentSize + 5) + 'px';
            yesBtn.style.padding = '15px 40px';
        }

        // 3. CELEBRATION
        function celebrate(e) {
            e.stopPropagation();
            
            envelope.style.display = 'none';
            noBtn.style.display = 'none';
            
            const celeb = document.getElementById('celebration');
            celeb.style.display = 'block';
            document.body.style.overflow = 'auto'; 
            
            generateReasons();
            
            setInterval(() => spawnHeart(false), 300);
        }

        // 4. GENERATE COLORFUL NOTES
        const myReasons = [
            "Your kindness", "The way you smell", "Your cooking", "Your ambition",
            "Our late night talks", "Your eyes", "How you support me", "Your hugs",
            "Inside jokes", "Your patience", "Your intelligence", "Your style",
            "Your laugh", "The way you dance", "Your voice"
        ];

        while (myReasons.length < 100) {
            myReasons.push("Reason #" + (myReasons.length + 1) + ": I love you!");
        }

        const noteColors = [
            '#ffadad', '#ffd6a5', '#fdffb6', '#caffbf', 
            '#9bf6ff', '#a0c4ff', '#bdb2ff', '#ffc6ff', '#fffffc'
        ];

        function generateReasons() {
            const grid = document.getElementById('reasonsGrid');
            myReasons.forEach((reason, i) => {
                const note = document.createElement('div');
                note.classList.add('sticky-note');
                note.innerText = reason;
                const rot = Math.random() * 10 - 5;
                note.style.setProperty('--rot', rot + 'deg');
                const randomColor = noteColors[Math.floor(Math.random() * noteColors.length)];
                note.style.backgroundColor = randomColor;
                grid.appendChild(note);
            });
        }

        // 5. HEART ANIMATION (UPDATED)
        function spawnHeart(isBalloon) {
            const heart = document.createElement('div');
            heart.classList.add('floating-heart');
            heart.innerHTML = ['‚ù§Ô∏è','üíñ','üíù'][Math.floor(Math.random()*3)];
            
            if (isBalloon) {
                // BALLOON STYLE
                envelope.appendChild(heart);
                const randomX = Math.random() * 60 + 20; 
                heart.style.left = randomX + '%';
                heart.style.top = '50%'; 
                heart.style.fontSize = (Math.random() * 2 + 2.5) + 'rem'; 
                heart.style.animationName = 'floatUp'; 
            } else {
                // RAIN STYLE
                document.body.appendChild(heart);
                heart.style.left = Math.random() * 100 + 'vw';
                heart.style.top = '100vh';
                heart.style.position = 'fixed';
                heart.style.animationName = 'rainUp';
            }
            
            heart.style.animationDuration = (Math.random() * 3 + 2) + 's';
            setTimeout(() => heart.remove(), 5000);
        }
    </script>
</body>
</html>
